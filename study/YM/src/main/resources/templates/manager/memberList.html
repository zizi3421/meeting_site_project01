<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>회원 조회 페이지</title>
    <style>
        #modalContainer {
    width: 100%;
    height: 100%;
    position: fixed;
    top: 0;
    left: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    background: rgba(0, 0, 0, 0.5);
    }

        #modalContent {
        text-align : center;
      position: absolute;
      background-color: #ffffff;
      width: 300px;
      height: 200px;
      padding: 15px;
    }

        #modalContainer.hidden {
      display: none;
    }
    </style>
</head>
<body>
<h1>회원 조회 페이지</h1>

<table>
    <tr>
        <th>회원 ID</th>
        <th>닉네임</th>
        <th>가입 날짜</th>
        <th>권한</th>
    </tr>
    <tr th:each="member : ${memberList}">
        <td th:text="${member.userId}">1</td>
        <td th:text="${member.nickName}">홍길동</td>
        <td th:text="${member.signDate}">가입 날짜</td>
        <td th:text="${member.userAdmin}">0</td>
        <td>
            <button th:onclick="|location.href='@{memberEdit(userid=${member.userId})}'|" style="cursor: pointer;">수정</button>
            <button type="button" id="modalOpenButton" style="cursor : pointer;">삭제</button>
            <input type="hidden" name="userid" value="${member.userId}">
        </td>
    </tr>
    <tr th:unless="${not #lists.isEmpty(memberList)}">
        <td colspan="7">등록된 회원의 정보가 없습니다.</td>
    </tr>
</table>

<div id="modalContainer" class="hidden">
    <div id="modalContent" style="border-radius: 5px;">
        <p style="color: red; font-size: 24px; text-align: center;">정말
            삭제하시겠습니까?</p>
        <button
                onclick="location.href='delete/${member.userid}'">네</button>
        <button id="modalCloseButton">아니요</button>
    </div>
</div>
<script>

    function editMember(event) {
        <!-- 수정 페이지로 이동하는 이벤트 -->
        let userId = event.target.parentNode.parentNode.childNodes[1].innerHTML;
        console.log(userId); // userId 출력 (디버깅용)
        window.location = 'memberEdit/' + userId;
    }
    function deleteMember(userId) {
        <!-- 삭제 기능을 수행하고 돌아오는 로직 -->
        if (confirm('정말로 이 회원을 삭제하시겠습니까?')) {
            window.location = 'delete/' + userId;
        }
    }
</script>
<script type="text/javascript">
    const modalOpenButton = document.getElementById('modalOpenButton');
    const modalCloseButton = document.getElementById('modalCloseButton');
    const modal = document.getElementById('modalContainer');

    modalOpenButton.addEventListener('click', () => {
      modal.classList.remove('hidden');
    });

    modalCloseButton.addEventListener('click', () => {
      modal.classList.add('hidden');
    });
</script>
</body>
</html>